/*! 
 Build based on gin-vue-admin 
 Time : 1718987800000 */
import{u as a,a as t,o as e,c as i,b as n,d as o,w as s,g as l,t as r,G as p,h as c,ap as d,k as m,E as u}from"./087AC4D233B64EB0index.72fd2312.js";/* empty css                                   *//* empty css                              *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               */import{E as B,a as C}from"./087AC4D233B64EB0table-column.a0d188fb.js";import"./087AC4D233B64EB0checkbox.ca4c4f80.js";/* empty css                                *//* empty css                               */import{f,h as g,r as D}from"./087AC4D233B64EB0autoCode.965944c1.js";import{f as E}from"./087AC4D233B64EB0format.44101a7e.js";import{E as y}from"./087AC4D233B64EB0index.ea000fb0.js";import{E as A}from"./087AC4D233B64EB0index.111d928a.js";import"./087AC4D233B64EB0index.ffab591b.js";import"./087AC4D233B64EB0index.a0571a5c.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0_baseIteratee.e71013e5.js";import"./087AC4D233B64EB0_Uint8Array.d3e78e14.js";import"./087AC4D233B64EB0isEqual.add17071.js";import"./087AC4D233B64EB0hasIn.391c448e.js";import"./087AC4D233B64EB0debounce.1e721c0b.js";import"./087AC4D233B64EB0_initCloneObject.253b0cea.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.cf01d2cf.js";import"./087AC4D233B64EB0sysDictionary.8a34cf5d.js";import"./087AC4D233B64EB0index.3d51996d.js";import"./087AC4D233B64EB0strings.ee229cfb.js";const j={class:"gva-table-box"},b={class:"gva-btn-list"},w={class:"gva-pagination"},v=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(v){const h=a(),x=t(1),k=t(0),_=t(10),T=t([]),z=a=>{_.value=a,N()},I=a=>{x.value=a,N()},N=async()=>{const a=await f({page:x.value,pageSize:_.value});0===a.code&&(T.value=a.data.list,k.value=a.data.total,x.value=a.data.page,_.value=a.data.pageSize)};N();const S=async(a,t)=>{t?d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await D({id:Number(a.ID),deleteTable:t})).code&&(m.success("回滚成功"),N())}))}))})):d.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await D({id:Number(a.ID),deleteTable:t})).code&&(m.success("回滚成功"),N())}))},U=a=>{a?h.push({name:"autoCodeEdit",params:{id:a.ID}}):h.push({name:"autoCode"})};return(a,t)=>{const f=u,D=B,v=y,h=C,O=A;return e(),i("div",null,[n("div",j,[n("div",b,[o(f,{type:"primary",icon:"plus",onClick:t[0]||(t[0]=a=>U(null))},{default:s((()=>[l("新增")])),_:1})]),o(h,{data:T.value},{default:s((()=>[o(D,{type:"selection",width:"55"}),o(D,{align:"left",label:"id",width:"60",prop:"ID"}),o(D,{align:"left",label:"日期",width:"180"},{default:s((a=>[l(r(p(E)(a.row.CreatedAt)),1)])),_:1}),o(D,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),o(D,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),o(D,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),o(D,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:s((a=>[a.row.flag?(e(),c(v,{key:0,type:"danger",effect:"dark"},{default:s((()=>[l(" 已回滚 ")])),_:1})):(e(),c(v,{key:1,type:"success",effect:"dark"},{default:s((()=>[l(" 未回滚 ")])),_:1}))])),_:1}),o(D,{align:"left",label:"操作","min-width":"240"},{default:s((a=>[n("div",null,[o(f,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>S(a.row,!0)},{default:s((()=>[l("回滚(删表)")])),_:2},1032,["disabled","onClick"]),o(f,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>S(a.row,!1)},{default:s((()=>[l("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),o(f,{type:"primary",link:"",onClick:t=>U(a.row)},{default:s((()=>[l("复用")])),_:2},1032,["onClick"]),o(f,{type:"primary",link:"",onClick:t=>(async a=>{d.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await g({id:Number(a.ID)})).code&&(m.success("删除成功"),N())}))})(a.row)},{default:s((()=>[l("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),n("div",w,[o(O,{"current-page":x.value,"page-size":_.value,"page-sizes":[10,30,50,100],total:k.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:I,onSizeChange:z},null,8,["current-page","page-size","total"])])])])}}});export{v as default};
