/*! 
 Build based on gin-vue-admin 
 Time : 1718987800000 */
import{s as e,a,o as t,c as o,d as l,b as s,w as r,g as i,t as u,G as m,ap as n,k as p,E as d,l as c}from"./087AC4D233B64EB0index.72fd2312.js";import{E as B}from"./087AC4D233B64EB0dialog.d2da24e2.js";/* empty css                                *//* empty css                                  *//* empty css                              *//* empty css                                   *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               */import{E as C,a as D}from"./087AC4D233B64EB0table-column.a0d188fb.js";import"./087AC4D233B64EB0checkbox.ca4c4f80.js";/* empty css                                *//* empty css                               */import{_ as v}from"./087AC4D233B64EB0warningBar.90f1d9d1.js";import{f as E}from"./087AC4D233B64EB0format.44101a7e.js";import{E as f}from"./087AC4D233B64EB0index.111d928a.js";import{a as j,E as A}from"./087AC4D233B64EB0index.7b396154.js";import"./087AC4D233B64EB0use-dialog.3fba8604.js";import"./087AC4D233B64EB0isUndefined.d281c39a.js";import"./087AC4D233B64EB0index.ffab591b.js";import"./087AC4D233B64EB0index.a0571a5c.js";import"./087AC4D233B64EB0_baseIteratee.e71013e5.js";import"./087AC4D233B64EB0_Uint8Array.d3e78e14.js";import"./087AC4D233B64EB0isEqual.add17071.js";import"./087AC4D233B64EB0hasIn.391c448e.js";import"./087AC4D233B64EB0debounce.1e721c0b.js";import"./087AC4D233B64EB0_initCloneObject.253b0cea.js";import"./087AC4D233B64EB0date.225eaf4f.js";import"./087AC4D233B64EB0dictionary.cf01d2cf.js";import"./087AC4D233B64EB0sysDictionary.8a34cf5d.js";import"./087AC4D233B64EB0index.3d51996d.js";import"./087AC4D233B64EB0index.ea000fb0.js";import"./087AC4D233B64EB0strings.ee229cfb.js";import"./087AC4D233B64EB0castArray.673ea73c.js";import"./087AC4D233B64EB0_baseClone.503fbc91.js";const g=a=>e({url:"/customer/customer",method:"post",data:a}),y={class:"gva-table-box"},b={class:"gva-btn-list"},h={class:"gva-pagination"},w={class:"dialog-footer"},_=Object.assign({name:"Customer"},{__name:"customer",setup(_){const k=a({customerName:"",customerPhoneData:""}),x=a(1),V=a(0),I=a(10),z=a([]),U=e=>{I.value=e,P()},N=e=>{x.value=e,P()},P=async()=>{const a=await(t={page:x.value,pageSize:I.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(z.value=a.data.list,V.value=a.data.total,x.value=a.data.page,I.value=a.data.pageSize)};P();const S=a(!1),T=a(""),O=async a=>{const t=await(o={ID:a.ID},e({url:"/customer/customer",method:"get",params:o}));var o;T.value="update",0===t.code&&(k.value=t.data.customer,S.value=!0)},q=()=>{S.value=!1,k.value={customerName:"",customerPhoneData:""}},G=async a=>{n.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(p({type:"success",message:"删除成功"}),1===z.value.length&&x.value>1&&x.value--,P())}))},H=async()=>{let a;switch(T.value){case"create":default:a=await g(k.value);break;case"update":a=await(t=k.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(q(),P())},L=()=>{T.value="create",S.value=!0};return(e,a)=>{const n=d,p=C,g=D,_=f,P=c,T=j,W=A,X=B;return t(),o("div",null,[l(v,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",y,[s("div",b,[l(n,{type:"primary",icon:"plus",onClick:L},{default:r((()=>[i("新增")])),_:1})]),l(g,{ref:"multipleTable",data:z.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[l(p,{type:"selection",width:"55"}),l(p,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,u(m(E)(e.row.CreatedAt)),1)])),_:1}),l(p,{align:"left",label:"姓名",prop:"customerName",width:"120"}),l(p,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),l(p,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),l(p,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[l(n,{type:"primary",link:"",icon:"edit",onClick:a=>O(e.row)},{default:r((()=>[i("变更")])),_:2},1032,["onClick"]),l(n,{type:"primary",link:"",icon:"delete",onClick:a=>G(e.row)},{default:r((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",h,[l(_,{"current-page":x.value,"page-size":I.value,"page-sizes":[10,30,50,100],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:U},null,8,["current-page","page-size","total"])])]),l(X,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),"before-close":q,title:"客户"},{footer:r((()=>[s("div",w,[l(n,{onClick:q},{default:r((()=>[i("取 消")])),_:1}),l(n,{type:"primary",onClick:H},{default:r((()=>[i("确 定")])),_:1})])])),default:r((()=>[l(W,{inline:!0,model:k.value,"label-width":"80px"},{default:r((()=>[l(T,{label:"客户名"},{default:r((()=>[l(P,{modelValue:k.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),l(T,{label:"客户电话"},{default:r((()=>[l(P,{modelValue:k.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{_ as default};
